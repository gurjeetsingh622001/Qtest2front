<ngx-spinner type="ball-scale-multiple"></ngx-spinner>

<div class="container-fluid background_1">

    <div class="row justify-content-center">
        <div class="col-md-4 heading justify-content-center mt-5" style="margin-top: 100px;">
            <div>
                <h1>Registeration Form</h1><br>
                <img src="../../assets/pngaaa.com-5480364.png" class="img img-fluid">
            </div>
        </div>
        <div class="col-md-4 mt-5">
            <form [formGroup]="addUserForm" style="margin-top: 20px;">

                <div class="form-group">
                    <input type="name" formControlName="name" pInputText placeholder="Name">
                </div>

                <div class="text-danger ms-1" *ngIf="get['name'].invalid && get['name'].touched">

                    <div *ngIf="get['name'].errors &&get['name'].errors['required']">
                        Name is required
                    </div>
                    <div *ngIf="get['name'].errors &&get['name'].errors['minlength']">
                        min lenght is 5
                    </div>
                    <div *ngIf="get['name'].errors &&get['name'].errors['maxlength']">
                        max lenght is 15 </div>

                    <div *ngIf="get['name'].errors &&get['name'].errors['pattern']">
                        No Special Character</div>

                </div>

                <div class="form-group">
                    <input type="name" formControlName="email"
                        [class.is-invalid]="get['email'].invalid && get['email'].touched" pInputText
                        placeholder="Email">
                </div>

                <div class="text-danger ms-1" *ngIf="get['email'].invalid && get['email'].touched">

                    <div *ngIf="get['email'].errors &&get['email'].errors['required']">
                        Email is required
                    </div>
                    <div *ngIf="get['email'].errors &&get['email'].errors['pattern']">
                        fill valid email
                    </div>

                </div>

                <div class="form-group">
                    <input type="name" formControlName="phone"
                        [class.is-invalid]="get['phone'].invalid && get['phone'].touched" pInputText
                        class="p-inputtext-lg" placeholder="Phone">
                </div>

                <div class="text-danger ms-1" *ngIf="get['phone'].invalid && get['phone'].touched">
                    <div *ngIf="get['phone'].errors &&get['phone'].errors['required']">
                        Phone is required
                    </div>
                    <div *ngIf="get['phone'].errors &&get['phone'].errors['pattern']">
                        valid phone number
                    </div>

                </div>

                <div class="form-group">
                    <p-calendar formControlName="dob" [showTransitionOptions]="'0ms'" [hideTransitionOptions]="'0ms'"
                        placeholder="Date Of Birth" [inputStyle]="{'width':'400px'}">

                    </p-calendar>
                </div>

                <div class="text-danger ms-1" *ngIf="get['dob'].invalid && get['dob'].touched">
                    <div *ngIf="get['dob'].errors &&get['dob'].errors['required']">
                        Dob is required
                    </div>

                    <div *ngIf="get['dob'].errors &&get['dob'].errors['validDob']">
                        please fill Valid Dob
                    </div>

                    <div *ngIf="get['dob'].errors &&get['dob'].errors['ageRestriction']">
                        only 18+
                    </div>

                </div>

                <div class="form-group">
                    <p-dropdown [options]="countries" formControlName="country" placeholder="Select a Country"
                        optionLabel="name" (onChange)="onSelectCountry($event)"
                        [style]="{'minWidth': '12rem','maxWidth':'400px'}">
                        <ng-template let-option pTemplate="option">
                            <img src="{{option.flageImage}}" width="24" height="16" class="me-1" />
                            <span>{{option.name}}</span>
                        </ng-template>
                    </p-dropdown>
                </div>

                <div class="text-danger ms-1" *ngIf="get['country'].invalid && get['country'].touched">
                    <div *ngIf="get['country'].errors &&get['country'].errors['required']">
                        country is required
                    </div>
                </div>

                <div class="form-group">
                    <p-dropdown [options]="states" formControlName="state" optionLabel="name" placeholder="Select State"
                        *ngIf="isCountrySelected" [style]="{'minWidth': '12rem','maxWidth':'400px'}"></p-dropdown>
                </div>

                <div class="text-danger ms-1" *ngIf="get['state'].invalid && get['state'].touched">
                    <div *ngIf="get['state'].errors &&get['state'].errors['required']">
                        state is required
                    </div>
                </div>

                <div class="form-group">
                    <input formControlName="password" type="password"
                        [class.is-invalid]="get['password'].invalid && get['password'].touched" pInputText
                        class="p-inputtext-sm" placeholder="Password">
                </div>

                <div class="strength-bar text-center">
                    <app-password-strength [passwordToCheck]="addUserForm.value.password"
                        (passwordStrength)="passwordValid($event)"></app-password-strength>
                </div>

                <div class="text-danger ms-1" *ngIf="get['password'].invalid && get['password'].touched">

                    <div *ngIf="get['password'].errors &&get['password'].errors['required']">
                        password is required
                    </div>
                    <!-- <div *ngIf="get['password'].errors &&get['password'].errors['pattern']">
                        pattern should be strong
                    </div>
                    <div *ngIf="get['password'].errors &&get['password'].errors['minlength']">
                        min length is 6
                    </div>
                    <div *ngIf="get['password'].errors &&get['password'].errors['maxlength']">
                        maximum length is 50
                    </div> -->

                </div>

                <div class="text-danger ms-1" class="form-group">
                    <input formControlName="confirm_pass" pInputText type="password"
                        [class.is-invalid]="get['confirm_pass'].invalid && get['confirm_pass'].touched"
                        placeholder="Confirm Password">
                </div>

                <div class="text-danger ms-1" *ngIf="get['confirm_pass'].invalid && get['confirm_pass'].touched">

                    <div *ngIf="get['confirm_pass'].errors &&get['confirm_pass'].errors['confirmPassword']">
                        password mismatch
                    </div>

                </div>




                <div><br>
                    <button class="btn btn-primary" (click)="register()">Register</button>
                </div>

                <div class="row justify-content-center">
                    <div class="col-5 mt-1">
                        <a routerLink="/login">Already have a account</a>
                    </div>
                </div>

            </form>
        </div>
    </div>

</div>